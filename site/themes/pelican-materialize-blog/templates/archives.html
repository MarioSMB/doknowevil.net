{% extends "base.html" %}

{% block title %}{{ SITENAME }} - Archives{% endblock %}

{% block content %}

  <h1>Archives</h1>

  <div id="page-archives">

    {# based on http://stackoverflow.com/questions/12764291/jinja2-group-by-month-year #}
    {% for year, year_group in dates|groupby('date.year')|reverse %}
      {% for month, month_group in year_group|groupby('date.month')|reverse %}
        <h4 class="date"></h4>
        <dt>{{ (month_group|first).date|strftime('%b %Y') }}</dt>
        <dl>
          {% for article in month_group %}
            <dd>{{ article.date.strftime('%d') }}
              <a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a>
            </dd>
          {% endfor %}
        </dl>
      {% endfor %}
    {% endfor %}

  </div>

{% endblock %}
